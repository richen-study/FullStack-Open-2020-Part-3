{"version":3,"sources":["services/persons.js","App.js","index.js"],"names":["baseUrl","exports","getAll","axios","get","then","response","data","create","newObject","post","update","id","put","deletePerson","delete","Notification","message","className","Filter","search","handleSearchChange","value","onChange","PersonForm","addPerson","newName","handleNameChange","newNumber","handleNumberChange","onSubmit","type","Persons","persons","showAll","handlePersonDelete","peopleToShow","filter","people","name","toLowerCase","includes","number","toString","map","person","onClick","App","useState","setPersons","setNewName","setNewNumber","setShowAll","setSearch","errorMessage","setErrorMessage","useEffect","personService","event","target","preventDefault","personObject","some","personToUpdate","find","window","confirm","console","log","newPersons","indexOf","setTimeout","catch","err","alert","personsUpdated","concat","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.6c804078.chunk.js","sourcesContent":["import axios from \"axios\";\nconst baseUrl = \"/api/persons\";\n\nconst getAll = () => {\n  const request = axios.get(baseUrl);\n  return request.then((response) => response.data);\n};\n\nconst create = (newObject) => {\n  const request = axios.post(baseUrl, newObject);\n  return request.then((response) => response.data);\n};\n\nconst update = (id, newObject) => {\n  const request = axios.put(`${baseUrl}/${id}`, newObject);\n  return request.then((response) => response.data);\n};\n\nconst deletePerson = (id) => {\n  const request = axios.delete(`${baseUrl}/${id}`);\n  return request.then((response) => response.data);\n};\n\nconst exports = { getAll, create, update, deletePerson };\n\nexport default exports;\n","import React, { useState, useEffect } from \"react\";\nimport personService from \"./services/persons\";\nimport \"./index.css\";\n\nconst Notification = ({ message }) => {\n  if (message === null) {\n    return null;\n  }\n\n  return <div className=\"error\">{message}</div>;\n};\n\nconst Filter = ({ search, handleSearchChange }) => {\n  return (\n    <form>\n      <div>\n        Search People:\n        <input value={search} onChange={handleSearchChange} />\n      </div>\n    </form>\n  );\n};\n\nconst PersonForm = ({\n  addPerson,\n  newName,\n  handleNameChange,\n  newNumber,\n  handleNumberChange,\n}) => {\n  return (\n    <form onSubmit={addPerson}>\n      <div>\n        name: <input value={newName} onChange={handleNameChange} />\n      </div>\n      <div>\n        number: <input value={newNumber} onChange={handleNumberChange} />\n      </div>\n      <div>\n        <button type=\"submit\">add</button>\n      </div>\n    </form>\n  );\n};\nconst Persons = ({ persons, search, showAll, handlePersonDelete }) => {\n  const peopleToShow = showAll\n    ? persons\n    : persons.filter(\n        (people) =>\n          (people.name.toLowerCase().includes(search.toLowerCase()) ||\n            people.number.toString().includes(search)) === true\n      );\n  return (\n    <>\n      {peopleToShow.map((person) => (\n        <div key={person.name}>\n          {person.name}: {person.number}\n          <button onClick={() => handlePersonDelete(person)}>delete</button>\n        </div>\n      ))}\n    </>\n  );\n};\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState(\"\");\n  const [newNumber, setNewNumber] = useState(\"\");\n  const [showAll, setShowAll] = useState(true);\n  const [search, setSearch] = useState(\"\");\n  const [errorMessage, setErrorMessage] = useState(null);\n\n  useEffect(() => {\n    personService.getAll().then((response) => {\n      setPersons(response);\n    });\n  }, []);\n\n  const addPerson = (event) => {\n    event.preventDefault();\n    const personObject = {\n      name: newName,\n      number: newNumber,\n    };\n    if (persons.some((person) => person.name === personObject.name)) {\n      const personToUpdate = persons.find(\n        (person) => person.name === personObject.name\n      );\n      if (\n        window.confirm(\n          `Person ${newName}: \\n already exists, replace old number with new one?`\n        )\n      ) {\n        personService\n          .update(personToUpdate.id, personObject)\n          .then((response) => {\n            console.log(response);\n            const newPersons = [...persons];\n            newPersons[persons.indexOf(personToUpdate)] = response;\n            setPersons(newPersons);\n            setNewNumber(\"\");\n            setNewNumber(\"\");\n\n            setErrorMessage(`${personToUpdate.name} information updated...`);\n            setTimeout(() => {\n              setErrorMessage(null);\n            }, 3000);\n          })\n          .catch((err) => {\n            console.log(err);\n            alert(`${personToUpdate.name} already got deleted in the server`);\n            const personsUpdated = persons.filter(\n              (person) => person.id !== personToUpdate.id\n            );\n            setPersons(personsUpdated);\n            setNewName(\"\");\n            setNewNumber(\"\");\n          });\n      }\n      return;\n    }\n\n    personService\n      .create(personObject)\n      .then((response) => {\n        setPersons(persons.concat(response));\n        setNewName(\"\");\n        setNewNumber(\"\");\n        setErrorMessage(`${response.name} added!`);\n        setTimeout(() => {\n          setErrorMessage(null);\n        }, 3000);\n        return;\n      })\n      .catch((err) => console.log(err));\n    return;\n  };\n\n  const handleNameChange = (event) => {\n    setNewName(event.target.value);\n  };\n\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value);\n  };\n\n  const handleSearchChange = (event) => {\n    if (search === \"\") {\n      setShowAll(true);\n      setSearch(event.target.value);\n    }\n    setShowAll(false);\n    setSearch(event.target.value);\n  };\n\n  const handlePersonDelete = (person) => {\n    if (window.confirm(`Do you really want to delete ${person.name}?`)) {\n      personService\n        .deletePerson(person.id)\n        .then((response) => {\n          return response;\n        })\n        .then((response) => {\n          personService.getAll().then((response) => {\n            setPersons(response);\n          });\n        })\n        .catch((err) => console.log(err));\n      return;\n    }\n    return;\n  };\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={errorMessage} />\n      <Filter {...{ search, handleSearchChange }} />\n      <h2>Add a New Person</h2>\n      <PersonForm\n        {...{\n          addPerson,\n          newName,\n          handleNameChange,\n          newNumber,\n          handleNumberChange,\n        }}\n      />\n      <h2>Numbers</h2>\n      <Persons {...{ persons, search, showAll, handlePersonDelete }} />\n    </div>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}