(this["webpackJsonpfullstack-open-2020-part3-thephonebook"]=this["webpackJsonpfullstack-open-2020-part3-thephonebook"]||[]).push([[0],{41:function(e,n,t){},42:function(e,n,t){"use strict";t.r(n);var c=t(0),a=t(2),r=t.n(a),o=t(17),u=t.n(o),i=t(7),s=t(18),l=t(3),d=t(5),h=t.n(d),j="/api/persons",b={getAll:function(){return h.a.get(j).then((function(e){return e.data}))},create:function(e){return h.a.post(j,e).then((function(e){return e.data}))},update:function(e,n){return h.a.put("".concat(j,"/").concat(e),n).then((function(e){return e.data}))},deletePerson:function(e){return h.a.delete("".concat(j,"/").concat(e)).then((function(e){return e.data}))}},f=(t(41),function(e){var n=e.message;return null===n?null:Object(c.jsx)("div",{className:"error",children:n})}),m=function(e){var n=e.search,t=e.handleSearchChange;return Object(c.jsx)("form",{children:Object(c.jsxs)("div",{children:["Search People:",Object(c.jsx)("input",{value:n,onChange:t})]})})},O=function(e){var n=e.addPerson,t=e.newName,a=e.handleNameChange,r=e.newNumber,o=e.handleNumberChange;return Object(c.jsxs)("form",{onSubmit:n,children:[Object(c.jsxs)("div",{children:["name: ",Object(c.jsx)("input",{value:t,onChange:a})]}),Object(c.jsxs)("div",{children:["number: ",Object(c.jsx)("input",{value:r,onChange:o})]}),Object(c.jsx)("div",{children:Object(c.jsx)("button",{type:"submit",children:"add"})})]})},p=function(e){var n=e.persons,t=e.search,a=e.showAll,r=e.handlePersonDelete,o=a?n:n.filter((function(e){return!0===(e.name.toLowerCase().includes(t.toLowerCase())||e.number.toString().includes(t))}));return Object(c.jsx)(c.Fragment,{children:o.map((function(e){return Object(c.jsxs)("div",{children:[e.name,": ",e.number,Object(c.jsx)("button",{onClick:function(){return r(e)},children:"delete"})]},e.name)}))})},v=function(){var e=Object(a.useState)([]),n=Object(l.a)(e,2),t=n[0],r=n[1],o=Object(a.useState)(""),u=Object(l.a)(o,2),d=u[0],h=u[1],j=Object(a.useState)(""),v=Object(l.a)(j,2),x=v[0],g=v[1],w=Object(a.useState)(!0),C=Object(l.a)(w,2),S=C[0],N=C[1],P=Object(a.useState)(""),k=Object(l.a)(P,2),y=k[0],A=k[1],D=Object(a.useState)(null),E=Object(l.a)(D,2),J=E[0],L=E[1];Object(a.useEffect)((function(){b.getAll().then((function(e){r(e)}))}),[]);return Object(c.jsxs)("div",{children:[Object(c.jsx)("h2",{children:"Phonebook"}),Object(c.jsx)(f,{message:J}),Object(c.jsx)(m,Object(i.a)({},{search:y,handleSearchChange:function(e){""===y&&(N(!0),A(e.target.value)),N(!1),A(e.target.value)}})),Object(c.jsx)("h2",{children:"Add a New Person"}),Object(c.jsx)(O,Object(i.a)({},{addPerson:function(e){e.preventDefault();var n={name:d,number:x};if(t.some((function(e){return e.name===n.name}))){var c=t.find((function(e){return e.name===n.name}));window.confirm("Person ".concat(d,": \n already exists, replace old number with new one?"))&&b.update(c.id,n).then((function(e){var n=Object(s.a)(t);n[t.indexOf(c)]=e,r(n),g(""),g(""),L("".concat(c.name," information updated...")),setTimeout((function(){L(null)}),3e3)})).catch((function(e){alert("".concat(c.name," already got deleted in the server"));var n=t.filter((function(e){return e.id!==c.id}));r(n),h(""),g("")}))}else b.create(n).then((function(e){r(t.concat(e)),h(""),g(""),L("".concat(e.name," added!")),setTimeout((function(){L(null)}),3e3)})).catch((function(e){return console.log(e)}))},newName:d,handleNameChange:function(e){h(e.target.value)},newNumber:x,handleNumberChange:function(e){g(e.target.value)}})),Object(c.jsx)("h2",{children:"Numbers"}),Object(c.jsx)(p,Object(i.a)({},{persons:t,search:y,showAll:S,handlePersonDelete:function(e){window.confirm("Do you really want to delete ".concat(e.name,"?"))&&b.deletePerson(e.id).then((function(e){return e})).then((function(e){b.getAll().then((function(e){r(e)}))})).catch((function(e){return console.log(e)}))}}))]})};u.a.render(Object(c.jsx)(r.a.StrictMode,{children:Object(c.jsx)(v,{})}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.3b84f468.chunk.js.map